<div class="task-wrapper g-025" 
data-consider-for-overlapping-checks="true"
[class.editor-active]="this.editorActive"
[class.selected]="this.selected"
[class.archived]="this.task.archived"
[class]="this.task.status"
(click)="clickTask($event)" 

>
    <div *ngIf="!this.static"class="drag-handle translucent pointer" drag-on-this="true">⋮</div>
    <prioritizer *ngIf="!isPlaceholder()" [container]="task"> </prioritizer>
    <div *ngIf="!isPlaceholder() && this.task.status === 'todo'" class="status big pointer" (click)="toggleTaskStatus()">☐</div>
    <div *ngIf="!isPlaceholder() && this.task.status === 'completed'" class="status big pointer" (click)="toggleTaskStatus()">☑</div>

    <div class="flex wrap w-100 g-025">
        <div class="grow" #editor [container]="this.task" 
        [contenteditableHtml]="true" 
        contenteditable="true" 
        [(contenteditableModel)]="task.textContent"
        (contenteditableModelChange)="this.boardService.publishBoardUpdate()"
        ></div>
        

        <div *ngIf="task.status === 'completed'"class="date-wrapper translucent small flex align-items-center">
            completed {{this.task.stateChangeDate | date: 'dd-MM-yy hh:mm a'}}
        </div>
        <div class="task-toolbar">
            <span *ngIf="!static && task.status === 'completed'" (click)="toggleArchived()" class="archive pointer">🖿</span>
        </div>
    </div>
</div>
<div *ngIf="showChildren" class="task-children-wrapper g-025 ">
    <ng-container *ngFor="let child of this.task.children; let last = last">
        <div class="flex" >
            <div class="line">
                <div class="border-angle"></div>
                <div *ngIf="!last" class="border-line"></div>
            </div>
            <task class="child" [static]="static" [parent]="this.task" [task]="child"  [board]="this.board" [lane]="this.lane"></task>
        </div>
    </ng-container>
    
</div>    
