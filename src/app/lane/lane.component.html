<div class="lane-wrapper p-x-05" [class.static-view]="isTagged() && (tasks$ | async)?.length === 0" data-consider-for-overlapping-checks="true">
  <div class="lane-toolbar flex g-05 ">
    <div class="grow no-wrap flex align-items-center" >
      <div class="lane-title   no-wrap" 
      [container]="this.lane" 
      [contenteditableHtml]="true" 
      contenteditable="true" 
      [(contenteditableModel)]="lane.textContent"
      (onBlur)="this.boardService.publishBoardUpdate()"
      > </div> 
      <prioritizer [container]="lane"> </prioritizer>
    </div>
    <div class="grow"></div>
    <div class="no-grow relative">
      <div class="small translucent no-grow" (click)="menuOpen = !menuOpen; $event.stopPropagation()">â˜°</div>
      <lane-menu *ngIf="menuOpen" [lane]="lane" (onClose)="menuOpen = false">
        <button class="small no-grow" (click)="nukeArchived()">â˜¢ Nuke archived </button>

        <button class="small danger no-grow" *ngIf="(tasks$ | async)?.length == 0" (click)="deleteLane()">â¡ Delete lane</button>
        <button class="small no-grow" *ngIf="isTagged() && !lane.showChildren" (click)="toggleShowChildren()">â˜ Show Children </button>
        <button class="small no-grow" *ngIf="isTagged() && lane.showChildren" (click)="toggleShowChildren()"><span class="completed">â˜‘</span> Show Children </button>
    
        <button class="small no-grow" (click)="createNewTask()">ğŸ†• New task</button>
      </lane-menu>
    </div>

    <span drag-on-this="true" class="drag-handle big no-grow">â‹¯</span>
  </div>

  <ng-container *ngFor="let task of tasks$ | async">
    <task [task]="task" [parent]="lane" [board]="board" [lane]="lane"  (createNewTask)="createNewTask()"></task>
  </ng-container>

  <ng-container *ngIf="isTagged()">
    <div class="static-view flex column">
        <task *ngFor="let task of taggedTasks$ | async" [static]="true" [showChildren]="lane.showChildren" [task]="task" [parent]="lane" [board]="board" [lane]="lane"></task>
    </div>
  </ng-container>

  <!-- <p class="floating-label">Lane: {{lane.id}}</p> -->

  <div class="lane-toolbar flex g-05">
    <div class="grow"></div><button class="small no-grow" (click)="createNewTask()">New task</button>
  </div>
</div>